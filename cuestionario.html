<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Cuestionario Diario - ReflexiÃ³n Virtual</title>
  <link rel="stylesheet" href="css/estilos.css" />
</head>
<body class="fondo-cuestionario">

  <header class="panel-superior">
    <h1 class="titulo-app">ReflexiÃ³n Virtual</h1>
    <nav>
      <button id="perfilBtn">Perfil</button>
      <button id="cerrarSesionBtn">Cerrar sesiÃ³n</button>
    </nav>
  </header>

  <main class="cuestionario-contenido">
    <h2>Cuestionario diario de bienestar ğŸŒ¿</h2>
    <p>Responde con calma y sinceridad. Tus respuestas te ayudarÃ¡n a reflexionar y mejorar tu bienestar emocional.</p>

    <form id="formCuestionario">

      <div class="pregunta">
        <h3>1. Â¿CÃ³mo te sientes hoy?</h3>
        <label><input type="radio" name="animo" value="Feliz" required> ğŸ˜Š Feliz</label>
        <label><input type="radio" name="animo" value="Triste"> ğŸ˜¢ Triste</label>
        <label><input type="radio" name="animo" value="Estresado"> ğŸ˜£ Estresado</label>
        <label><input type="radio" name="animo" value="Tranquilo"> ğŸ˜Œ Tranquilo</label>
        <label><input type="radio" name="animo" value="Ansioso"> ğŸ˜¬ Ansioso</label>
      </div>

      <div class="pregunta">
        <h3>2. Â¿QuÃ© nivel de energÃ­a sientes hoy?</h3>
        <label><input type="radio" name="energia" value="Alta" required> ğŸ”¥ Alta</label>
        <label><input type="radio" name="energia" value="Media"> âš¡ Media</label>
        <label><input type="radio" name="energia" value="Baja"> ğŸŒ™ Baja</label>
      </div>

      <!-- DESCANSO -->
      <div class="pregunta">
        <h3>3. Â¿CÃ³mo dormiste anoche?</h3>
        <label><input type="radio" name="descanso" value="Bien" required> ğŸ˜´ Bien</label>
        <label><input type="radio" name="descanso" value="Regular"> ğŸ˜• Regular</label>
        <label><input type="radio" name="descanso" value="Mal"> ğŸ˜« Mal</label>
      </div>

      <div class="pregunta">
        <h3>4. Â¿QuÃ© tan concentrado/a te sientes hoy?</h3>
        <label><input type="radio" name="concentracion" value="Muy concentrado" required> ğŸ¯ Muy concentrado/a</label>
        <label><input type="radio" name="concentracion" value="Poco concentrado"> ğŸ˜µ Poco concentrado/a</label>
        <label><input type="radio" name="concentracion" value="DistraÃ­do"> ğŸ’­ DistraÃ­do/a</label>
      </div>

      <div class="pregunta">
        <h3>5. Â¿CÃ³mo han sido tus interacciones con los demÃ¡s hoy?</h3>
        <label><input type="radio" name="relaciones" value="Positivas" required> ğŸ’¬ Positivas</label>
        <label><input type="radio" name="relaciones" value="Neutras"> ğŸ˜ Neutras</label>
        <label><input type="radio" name="relaciones" value="DifÃ­ciles"> ğŸ˜  DifÃ­ciles</label>
      </div>

      <div class="pregunta">
        <h3>6. Â¿QuÃ© tan motivado/a te sientes hoy?</h3>
        <label><input type="radio" name="motivacion" value="Muy motivado" required> ğŸš€ Muy motivado/a</label>
        <label><input type="radio" name="motivacion" value="Algo motivado"> ğŸ™‚ Algo motivado/a</label>
        <label><input type="radio" name="motivacion" value="Sin motivaciÃ³n"> ğŸ˜” Sin motivaciÃ³n</label>
      </div>

      <div class="pregunta">
        <h3>7. Â¿Sientes que hoy el estrÃ©s te estÃ¡ afectando?</h3>
        <label><input type="radio" name="estres" value="No"> ğŸŒ¼ No mucho</label>
        <label><input type="radio" name="estres" value="Moderado"> ğŸ˜ Un poco</label>
        <label><input type="radio" name="estres" value="Alto"> ğŸ˜£ Bastante</label>
      </div>

      <div class="pregunta">
        <h3>8. Â¿Has pensado en algo por lo que estÃ©s agradecido hoy?</h3>
        <label><input type="radio" name="agradecimiento" value="SÃ­" required> ğŸ’– SÃ­</label>
        <label><input type="radio" name="agradecimiento" value="No"> ğŸ™ No</label>
      </div>

      <div class="pregunta">
        <h3>9. Â¿QuÃ© te gustarÃ­a mejorar o cuidar mÃ¡s hoy?</h3>
        <label><input type="checkbox" name="mejorar" value="Paciencia"> ğŸ•Šï¸ Paciencia</label>
        <label><input type="checkbox" name="mejorar" value="MotivaciÃ³n"> ğŸ’ª MotivaciÃ³n</label>
        <label><input type="checkbox" name="mejorar" value="Descanso"> ğŸ˜´ Descanso</label>
        <label><input type="checkbox" name="mejorar" value="ConcentraciÃ³n"> ğŸ§  ConcentraciÃ³n</label>
        <label><input type="checkbox" name="mejorar" value="Relaciones"> â¤ï¸ Relaciones</label>
        <label><input type="checkbox" name="mejorar" value="Autoestima"> ğŸŒº Autoestima</label>
      </div>

      <div class="pregunta">
        <h3>10. Â¿CÃ³mo describirÃ­as tu dÃ­a en una palabra?</h3>
        <input type="text" name="palabra" placeholder="Ejemplo: tranquilo, complicado, alegre..." required>
      </div>

      <div class="boton-centro">
        <button type="submit" class="boton-final">Enviar respuestas</button>
      </div>
    </form>
  </main>

  <script type="module" src="js/firebase-config.js"></script>
  <script>
    document.getElementById("perfilBtn").addEventListener("click", () => {
      window.location.href = "perfil.html";
    });
    document.getElementById("cerrarSesionBtn").addEventListener("click", () => {
      localStorage.clear();
      window.location.href = "index.html";
    });

    function generarConsejo(estado) {
      const consejos = {
        Feliz: "MantÃ©n esa energÃ­a y compÃ¡rtela con los demÃ¡s ğŸŒ",
        Triste: "TÃ³mate un momento para ti, escuchar mÃºsica o escribir puede ayudarte ğŸ’œ",
        Estresado: "Recuerda que todo pasa, respira profundo y date un descanso ğŸŒ¸",
        Tranquilo: "Aprovecha tu serenidad para hacer algo que te inspire â˜•",
        Ansioso: "ConcÃ©ntrate en el presente y haz algo que te relaje ğŸŒ¿",
        Positivas: "Rodearte de personas que te sumen mejora tus dÃ­as ğŸ’«",
        DifÃ­ciles: "Respira antes de reaccionar, la calma siempre ayuda ğŸŒ¼",
        Alta: "Aprovecha tu energÃ­a para avanzar en tus metas ğŸš€",
        Baja: "No te presiones, descansar tambiÃ©n es productivo ğŸŒ™",
        Bien: "Dormir bien te da poder para tener un gran dÃ­a ğŸ’ª",
        Mal: "Evita pantallas antes de dormir, tu cuerpo necesita desconectarse ğŸŒŒ",
        MuyMotivado: "Sigue soÃ±ando alto, cada paso cuenta ğŸŒ ",
        SinMotivacion: "No te castigues, incluso los dÃ­as lentos suman ğŸŒ¾",
        SÃ­: "Agradecer te conecta con lo que realmente importa ğŸ’–",
        No: "Busca algo pequeÃ±o que te haga sonreÃ­r hoy ğŸŒˆ"
      };
      return consejos[estado] || "Recuerda que cada dÃ­a es una nueva oportunidad para crecer ğŸŒ»";
    }

    // === GUARDAR Y REDIRIGIR ===
    document.getElementById("formCuestionario").addEventListener("submit", (e) => {
      e.preventDefault();

      const form = e.target;
      const data = new FormData(form);
      const respuestas = Object.fromEntries(data.entries());

      const mejoras = Array.from(document.querySelectorAll('input[name="mejorar"]:checked')).map(i => i.value);
      respuestas.mejoras = mejoras;

      const animo = respuestas.animo;
      const consejo = generarConsejo(animo);

      const resultado = {
        fecha: new Date().toLocaleDateString("es-ES", { weekday: 'long', day: 'numeric', month: 'long' }),
        ...respuestas,
        consejo
      };

      localStorage.setItem("resultadoDiario", JSON.stringify(resultado));

      const semana = JSON.parse(localStorage.getItem("emocionesSemanales")) || [];
      semana.push({ dia: resultado.fecha, estado: animo, consejo });
      localStorage.setItem("emocionesSemanales", JSON.stringify(semana));

      window.location.href = "resultados.html";
    });
  </script>
</body>
</html>
